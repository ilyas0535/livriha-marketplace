{% load static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <title>{% block title %}Livriha - Create Free Online Store | Multi-Vendor E-commerce Platform | Créer Boutique Gratuite | إنشاء متجر إلكتروني مجاني{% endblock %}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Create your free online store with Livriha. Multi-vendor e-commerce platform with cash on delivery, payment gateway integration. Start selling online today! Créez votre boutique en ligne gratuite. إنشاء متجر إلكتروني مجاني مع الدفع عند الاستلام">
    <meta name="keywords" content="free online store, create ecommerce website, multi-vendor marketplace, cash on delivery, payment gateway, sell online, boutique en ligne gratuite, créer site e-commerce, paiement à la livraison, vendre en ligne, متجر إلكتروني مجاني, إنشاء موقع تجارة إلكترونية, الدفع عند الاستلام, بيع اون لاين, marketplace gratuit, plateforme e-commerce, vente en ligne, تجارة إلكترونية, سوق إلكتروني, منصة البيع">
    <meta name="author" content="Livriha">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en, fr, ar">
    <meta name="geo.region" content="DZ, MA, TN, EG, SA, AE, FR, CA, US, GB">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Livriha - Create Free Online Store | Multi-Vendor E-commerce Platform">
    <meta property="og:description" content="Start your free online business today. Multi-vendor marketplace with cash on delivery, secure payments, and easy store management.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://livriha.store">
    <meta property="og:image" content="{% static 'site_logo/livriha.png' %}">
    <meta property="og:site_name" content="Livriha">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Livriha - Free E-commerce Platform">
    <meta name="twitter:description" content="Create your online store for free. Multi-vendor marketplace with cash on delivery support.">
    <meta name="twitter:image" content="{% static 'site_logo/livriha.png' %}">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#007bff">
    <link rel="canonical" href="https://livriha.store">
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Livriha",
        "alternateName": ["Livriha Marketplace", "متجر ليفريها", "Boutique Livriha"],
        "url": "https://livriha.store",
        "description": "Create your free online store with Livriha. Multi-vendor e-commerce platform with cash on delivery support.",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://livriha.store/?search={search_term_string}",
            "query-input": "required name=search_term_string"
        },
        "sameAs": [
            "https://facebook.com/livriha",
            "https://twitter.com/livriha",
            "https://instagram.com/livriha"
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Livriha",
        "url": "https://livriha.store",
        "logo": "{% static 'site_logo/livriha.png' %}",
        "description": "Free multi-vendor e-commerce platform enabling anyone to create their online store with cash on delivery support.",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "DZ"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "availableLanguage": ["English", "French", "Arabic"]
        }
    }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/jpeg" href="{% static 'site_logo/a_la_livraison_logo.jpeg' %}">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
                <img src="{% static 'site_logo/livriha.png' %}" alt="Livriha" height="40" class="me-2">
                Livriha
            </a>
            
            <!-- Language Switcher -->
            <div class="dropdown me-3">
                <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    <i class="fas fa-globe"></i> 
                    {% if LANGUAGE_CODE == 'fr' %}FR{% elif LANGUAGE_CODE == 'ar' %}AR{% else %}EN{% endif %}
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#" onclick="setLanguage('en')">English</a></li>
                    <li><a class="dropdown-item" href="#" onclick="setLanguage('fr')">Français</a></li>
                    <li><a class="dropdown-item" href="#" onclick="setLanguage('ar')">العربية</a></li>
                </ul>
            </div>
            
            <!-- Quick Search -->
            <form class="d-flex me-3" method="get" action="{% url 'home' %}">
                <input class="form-control me-2" type="search" name="search" placeholder="Search..." style="width: 200px;" data-translate="Search...">
                <button class="btn btn-outline-light" type="submit" data-translate="Search">Search</button>
            </form>
            
            <div class="navbar-nav ms-auto">
                <!-- Cart Icon -->
                <a class="nav-link position-relative" href="{% url 'cart' %}">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-count" style="display: none;">
                        0
                    </span>
                </a>
                
                {% if user.is_authenticated %}
                    <a class="nav-link" href="{% url 'dashboard' %}" data-translate="Dashboard">Dashboard</a>
                    <a class="nav-link" href="{% url 'wishlist' %}" data-translate="Wishlist">Wishlist</a>
                    
                    <!-- Notifications Dropdown -->
                    <div class="nav-item dropdown">
                        <a class="nav-link position-relative" href="#" id="notificationDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-bell"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notification-count" style="display: none;">
                                0
                            </span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" style="width: 350px; max-height: 400px; overflow-y: auto;">
                            <li><h6 class="dropdown-header" data-translate="Notifications">Notifications</h6></li>
                            <div id="notification-list">
                                <!-- Notifications will be loaded here -->
                            </div>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-center" href="#" onclick="markAllAsRead()">Mark all as read</a></li>
                        </ul>
                    </div>
                    
                    <a class="nav-link" href="{% url 'logout' %}" data-translate="Logout">Logout</a>
                {% else %}
                    <a class="nav-link" href="{% url 'login' %}" data-translate="Login">Login</a>
                    <a class="nav-link" href="{% url 'register' %}" data-translate="Register">Register</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <main class="container mt-4">
        {% csrf_token %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/notifications.js' %}"></script>
    <script src="{% static 'js/cart.js' %}"></script>
    <script>
        // Translation system
        const translations = {
            'en': {
                'Search': 'Search', 'Search...': 'Search...', 'Dashboard': 'Dashboard', 'Wishlist': 'Wishlist', 
                'Login': 'Login', 'Register': 'Register', 'Logout': 'Logout', 'Home': 'Home', 'Cart': 'Cart',
                'Products': 'Products', 'Orders': 'Orders', 'Shop': 'Shop', 'Price': 'Price', 'Add to Cart': 'Add to Cart',
                'Buy Now': 'Buy Now', 'Create Shop': 'Create Shop', 'My Shop': 'My Shop', 'Edit Product': 'Edit Product',
                'Add Product': 'Add Product', 'View Shop': 'View Shop', 'Notifications': 'Notifications',
                'Welcome to Livriha': 'Welcome to Livriha', 'Your Ultimate Multi-Vendor Marketplace': 'Your Ultimate Multi-Vendor Marketplace',
                'Discover amazing products from trusted sellers worldwide. Shop with confidence, sell with ease.': 'Discover amazing products from trusted sellers worldwide. Shop with confidence, sell with ease.',
                'Start Shopping': 'Start Shopping', 'Join as Seller': 'Join as Seller', 'Email': 'Email', 'Password': 'Password',
                'Username': 'Username', 'Confirm Password': 'Confirm Password', 'I want to sell products': 'I want to sell products'
            },
            'fr': {
                'Search': 'Rechercher', 'Search...': 'Rechercher...', 'Dashboard': 'Tableau de bord', 'Wishlist': 'Liste de souhaits',
                'Login': 'Connexion', 'Register': "S'inscrire", 'Logout': 'Déconnexion', 'Home': 'Accueil', 'Cart': 'Panier',
                'Products': 'Produits', 'Orders': 'Commandes', 'Shop': 'Boutique', 'Price': 'Prix', 'Add to Cart': 'Ajouter au panier',
                'Buy Now': 'Acheter maintenant', 'Create Shop': 'Créer une boutique', 'My Shop': 'Ma boutique', 'Edit Product': 'Modifier le produit',
                'Add Product': 'Ajouter un produit', 'View Shop': 'Voir la boutique', 'Notifications': 'Notifications',
                'Welcome to Livriha': 'Bienvenue sur Livriha', 'Your Ultimate Multi-Vendor Marketplace': 'Votre marché multi-vendeurs ultime',
                'Discover amazing products from trusted sellers worldwide. Shop with confidence, sell with ease.': 'Découvrez des produits incroyables de vendeurs de confiance du monde entier. Achetez en toute confiance, vendez facilement.',
                'Start Shopping': 'Commencer à acheter', 'Join as Seller': 'Rejoindre comme vendeur', 'Email': 'E-mail', 'Password': 'Mot de passe',
                'Username': "Nom d'utilisateur", 'Confirm Password': 'Confirmer le mot de passe', 'I want to sell products': 'Je veux vendre des produits'
            },
            'ar': {
                'Search': 'بحث', 'Search...': 'بحث...', 'Dashboard': 'لوحة التحكم', 'Wishlist': 'قائمة الأمنيات',
                'Login': 'تسجيل الدخول', 'Register': 'إنشاء حساب', 'Logout': 'تسجيل الخروج', 'Home': 'الرئيسية', 'Cart': 'السلة',
                'Products': 'المنتجات', 'Orders': 'الطلبات', 'Shop': 'المتجر', 'Price': 'السعر', 'Add to Cart': 'أضف إلى السلة',
                'Buy Now': 'اشتري الآن', 'Create Shop': 'إنشاء متجر', 'My Shop': 'متجري', 'Edit Product': 'تعديل المنتج',
                'Add Product': 'إضافة منتج', 'View Shop': 'عرض المتجر', 'Notifications': 'الإشعارات',
                'Welcome to Livriha': 'مرحباً بكم في ليفريها', 'Your Ultimate Multi-Vendor Marketplace': 'سوقكم الإلكتروني متعدد البائعين',
                'Discover amazing products from trusted sellers worldwide. Shop with confidence, sell with ease.': 'اكتشف منتجات رائعة من بائعين موثوقين حول العالم. تسوق بثقة، بع بسهولة.',
                'Start Shopping': 'ابدأ التسوق', 'Join as Seller': 'انضم كبائع', 'Email': 'البريد الإلكتروني', 'Password': 'كلمة المرور',
                'Username': 'اسم المستخدم', 'Confirm Password': 'تأكيد كلمة المرور', 'I want to sell products': 'أريد بيع المنتجات'
            }
        };
        
        // Get current language from URL or localStorage
        const pathParts = window.location.pathname.split('/');
        let currentLang = (pathParts[1] && ['en', 'fr', 'ar'].includes(pathParts[1])) ? pathParts[1] : localStorage.getItem('selectedLanguage') || 'en';
        
        // Save language preference
        localStorage.setItem('selectedLanguage', currentLang);
        
        // Translate page on load
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                const translation = translations[currentLang] && translations[currentLang][key];
                if (translation) {
                    if (element.tagName === 'INPUT') {
                        element.placeholder = translation;
                    } else {
                        element.textContent = translation;
                    }
                }
            });
            
            // Set RTL for Arabic
            if (currentLang === 'ar') {
                document.body.style.direction = 'rtl';
                document.body.style.textAlign = 'right';
            } else {
                document.body.style.direction = 'ltr';
                document.body.style.textAlign = 'left';
            }
        });
        
        // Language switcher function
        function setLanguage(lang) {
            localStorage.setItem('selectedLanguage', lang);
            
            // Update current page URL
            const currentPath = window.location.pathname;
            let pathParts = currentPath.split('/').filter(part => part !== '');
            
            // Remove existing language prefix
            if (pathParts.length > 0 && ['en', 'fr', 'ar'].includes(pathParts[0])) {
                pathParts.shift();
            }
            
            // Build new path
            let newPath;
            if (lang === 'en') {
                newPath = pathParts.length > 0 ? '/' + pathParts.join('/') + '/' : '/';
            } else {
                newPath = '/' + lang + '/' + (pathParts.length > 0 ? pathParts.join('/') + '/' : '');
            }
            
            window.location.href = newPath;
        }
    </script>
    <script>
        // Initialize tooltips
        document.addEventListener('DOMContentLoaded', function() {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
</body>
</html>